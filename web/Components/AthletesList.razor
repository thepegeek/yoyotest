
<div class="col-12 border-bottom mb-3">
    <p>Track</p>
</div>


@for (int i = 0; i < Athletes.Count; i++)
{
    int index = i;
    <div class="row col-12">
        <div class="col-7">
            <p>
                @($"{i+1}. {Athletes[i].Name}")
            </p>
        </div>
        <div class="col-2">
            <button class="btn btn-warning btn-sm" disabled="@(Athletes[index].Warned)"
                    @onclick="@(e=>Warn(Athletes[index].Id))">
                Warn
            </button>
        </div>
        <div class="col-3">
            @if (Athletes[index].Result == null)
            {
                <button class="btn btn-danger btn-sm float-right" 
                        @onclick="@(_=>StopAthlete(Athletes[index].Id))"
                        disabled="@(!Athletes[index].Warned)">
                    Stop
                </button>
            }
            else
            {
                <span class="align-middle">@Athletes[index].Result</span>
                <button class="btn btn-sm oi @(Athletes[index].CanEdit?"oi-chevron-left":"oi-chevron-bottom") float-right"
                        @onclick="@(_=>{ Athletes[index].CanEdit = !Athletes[index].CanEdit; })">
                </button>
            }

        </div>

    </div>
    @if (Athletes[index].CanEdit)
    {
        <div class="row col-12 bg-light mb-2">
            <div class="offset-1 col-8">
                <span class="align-middle">Speed Level - Shuttle Number :</span>
            </div>
            <div class="col-3">
                <select class="form-control form-control-sm" @bind="@Athletes[index].Result">
                    @foreach (var item in ShuttleResults)
                    {
                        <option>@($"{item.Item1}-{item.Item2}")</option>
                    }
                </select>
            </div>            
        </div>
    }
}